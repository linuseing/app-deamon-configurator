import{j as e,L as d,l as x,r as a,w as p}from"./chunk-JZWAC4HX-bs4pZpVQ.js";function h({blueprint:s}){return e.jsxs(d,{to:`/configure/${s.id}`,className:"flex flex-col h-full p-4 rounded-lg border border-base-300 bg-base-100 hover:border-primary/50 hover:bg-base-200/30 transition-all group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-base-content group-hover:text-primary transition-colors line-clamp-1",children:s.name}),e.jsx("p",{className:"text-sm text-base-content/50 mt-1 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 mt-3 text-xs text-base-content/40",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-base-200 text-base-content/60",children:s.domain}),e.jsxs("span",{children:[s.inputCount," inputs"]}),s.author&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"truncate max-w-[100px]",children:s.author})]})]})]})}function u({blueprints:s}){return s.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg bg-base-200 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-base font-medium mb-1",children:"No blueprints found"}),e.jsxs("p",{className:"text-sm text-base-content/50 max-w-sm mx-auto",children:["Add blueprint folders to ",e.jsx("code",{className:"text-xs bg-base-200 px-1 py-0.5 rounded",children:"blueprints/"})," directory. Each folder should contain a ",e.jsx("code",{className:"text-xs bg-base-200 px-1 py-0.5 rounded",children:"blueprint.yaml"})," file."]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsx(h,{blueprint:t},t.id))})}function f(){const s=x(),[t,n]=a.useState(!1),r=a.useRef(null),o=a.useRef(null),l=s.state!=="idle",i=s.data?.success,c=s.data?.error;a.useEffect(()=>{i&&t&&(n(!1),r.current?.reset())},[i,t]),a.useEffect(()=>{t?o.current?.showModal():o.current?.close()},[t]);const m=()=>n(!t);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:m,className:"btn btn-primary btn-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Blueprints"]}),e.jsxs("dialog",{ref:o,className:"modal",onClose:()=>n(!1),children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"})}),e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Upload Blueprints"}),e.jsx("p",{className:"py-2 text-sm text-base-content/70",children:"Upload a .zip file containing your blueprints. The file will be unpacked into your configured AppDaemon apps directory."}),e.jsxs(s.Form,{method:"post",action:"/api/upload-blueprints",encType:"multipart/form-data",ref:r,className:"mt-4 space-y-4",children:[e.jsx("div",{className:"form-control w-full",children:e.jsx("input",{type:"file",name:"file",accept:".zip",required:!0,className:"file-input file-input-bordered w-full",disabled:l})}),c&&e.jsxs("div",{className:"alert alert-error text-sm py-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:c})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:()=>n(!1),disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Uploading..."]}):"Upload"})]})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",children:e.jsx("button",{children:"close"})})]})]})}function j({}){return[{title:"AppDaemon Configurator"},{name:"description",content:"Configure AppDaemon apps with a blueprint-style UI"}]}const g=p(function({loaderData:t}){const{blueprints:n,needsSettings:r}=t;return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Blueprints"}),e.jsx("p",{className:"text-sm text-base-content/50 mt-1",children:"Select a blueprint to configure"})]}),e.jsx(f,{})]}),r&&e.jsx("div",{className:"mb-4 p-4 rounded-lg border border-warning/30 bg-warning/5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-base-content/80",children:"Configure your AppDaemon apps folder path to discover blueprints."}),e.jsx(d,{to:"/settings",className:"btn btn-warning btn-xs mt-2",children:"Go to Settings"})]})]})}),e.jsx(u,{blueprints:n})]})});export{g as default,j as meta};
