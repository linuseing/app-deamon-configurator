import{R as V,r as re,b as kt,c as Et,u as Ct,d as Ot}from"./chunk-JZWAC4HX-bs4pZpVQ.js";var Rt=(e,s=!0)=>{const t=new FormData;if(!e)return t;for(const[i,l]of Object.entries(e))if(l!==void 0){if(typeof FileList<"u"&&l instanceof FileList){for(let n=0;n<l.length;n++)t.append(i,l[n]);continue}if(Array.isArray(l)&&l.length>0&&l.every(n=>n instanceof File||n instanceof Blob)){for(let n=0;n<l.length;n++)t.append(i,l[n]);continue}if(l instanceof File||l instanceof Blob){t.append(i,l);continue}if(s){t.append(i,JSON.stringify(l));continue}if(typeof l=="string"){t.append(i,l);continue}if(l instanceof Date){t.append(i,l.toISOString());continue}t.append(i,JSON.stringify(l))}return t},Ve=e=>e.type==="checkbox",ce=e=>e instanceof Date,G=e=>e==null;const lt=e=>typeof e=="object";var P=e=>!G(e)&&!Array.isArray(e)&&lt(e)&&!ce(e),ut=e=>P(e)&&e.target?Ve(e.target)?e.target.checked:e.target.value:e,pt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ot=(e,s)=>e.has(pt(s)),Tt=e=>{const s=e.constructor&&e.constructor.prototype;return P(s)&&s.hasOwnProperty("isPrototypeOf")},Le=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Le&&(e instanceof Blob||s))return e;const t=Array.isArray(e);if(!t&&!(P(e)&&Tt(e)))return e;const i=t?[]:Object.create(Object.getPrototypeOf(e));for(const l in e)Object.prototype.hasOwnProperty.call(e,l)&&(i[l]=N(e[l]));return i}var De=e=>/^\w*$/.test(e),T=e=>e===void 0,Ie=e=>Array.isArray(e)?e.filter(Boolean):[],Ue=e=>Ie(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!P(e))return t;const i=(De(s)?[s]:Ue(s)).reduce((l,n)=>G(l)?l:l[n],e);return T(i)||i===e?T(e[s])?t:e[s]:i},X=e=>typeof e=="boolean",z=e=>typeof e=="function",O=(e,s,t)=>{let i=-1;const l=De(s)?[s]:Ue(s),n=l.length,o=n-1;for(;++i<n;){const c=l[i];let k=t;if(i!==o){const R=e[c];k=P(R)||Array.isArray(R)?R:isNaN(+l[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=k,e=e[c]}};const Se={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},se={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ue={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dt=V.createContext(null);dt.displayName="HookFormControlContext";const Ne=()=>V.useContext(dt);var ct=(e,s,t,i=!0)=>{const l={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const o=n;return s._proxyFormState[o]!==se.all&&(s._proxyFormState[o]=!i||se.all),t&&(t[o]=!0),e[o]}});return l};const Be=typeof window<"u"?V.useLayoutEffect:V.useEffect;function Mt(e){const s=Ne(),{control:t=s,disabled:i,name:l,exact:n}=e||{},[o,c]=V.useState(t._formState),k=V.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Be(()=>t._subscribe({name:l,formState:k.current,exact:n,callback:R=>{!i&&c({...t._formState,...R})}}),[l,i,n]),V.useEffect(()=>{k.current.isValid&&t._setValid(!0)},[t]),V.useMemo(()=>ct(o,t,k.current,!1),[o,t])}var Z=e=>typeof e=="string",pe=(e,s,t,i,l)=>Z(e)?(i&&s.watch.add(e),y(t,e,l)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),y(t,n))):(i&&(s.watchAll=!0),t),Te=e=>G(e)||!lt(e);function ie(e,s,t=new WeakSet){if(Te(e)||Te(s))return Object.is(e,s);if(ce(e)&&ce(s))return Object.is(e.getTime(),s.getTime());const i=Object.keys(e),l=Object.keys(s);if(i.length!==l.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of i){const o=e[n];if(!l.includes(n))return!1;if(n!=="ref"){const c=s[n];if(ce(o)&&ce(c)||P(o)&&P(c)||Array.isArray(o)&&Array.isArray(c)?!ie(o,c,t):!Object.is(o,c))return!1}}return!0}function Lt(e){const s=Ne(),{control:t=s,name:i,defaultValue:l,disabled:n,exact:o,compute:c}=e||{},k=V.useRef(l),R=V.useRef(c),$=V.useRef(void 0),_=V.useRef(t),D=V.useRef(i);R.current=c;const[b,L]=V.useState(()=>{const x=t._getWatch(i,k.current);return R.current?R.current(x):x}),h=V.useCallback(x=>{const A=pe(i,t._names,x||t._formValues,!1,k.current);return R.current?R.current(A):A},[t._formValues,t._names,i]),p=V.useCallback(x=>{if(!n){const A=pe(i,t._names,x||t._formValues,!1,k.current);if(R.current){const H=R.current(A);ie(H,$.current)||(L(H),$.current=H)}else L(A)}},[t._formValues,t._names,n,i]);Be(()=>((_.current!==t||!ie(D.current,i))&&(_.current=t,D.current=i,p()),t._subscribe({name:i,formState:{values:!0},exact:o,callback:x=>{p(x.values)}})),[t,o,i,p]),V.useEffect(()=>t._removeUnmounted());const I=_.current!==t,F=D.current,W=V.useMemo(()=>{if(n)return null;const x=!I&&!ie(F,i);return I||x?h():null},[n,I,i,F,h]);return W!==null?W:b}function tr(e){const s=Ne(),{name:t,disabled:i,control:l=s,shouldUnregister:n,defaultValue:o,exact:c=!0}=e,k=ot(l._names.array,t),R=V.useMemo(()=>y(l._formValues,t,y(l._defaultValues,t,o)),[l,t,o]),$=Lt({control:l,name:t,defaultValue:R,exact:c}),_=Mt({control:l,name:t,exact:c}),D=V.useRef(e),b=V.useRef(void 0),L=V.useRef(l.register(t,{...e.rules,value:$,...X(e.disabled)?{disabled:e.disabled}:{}}));D.current=e;const h=V.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(_.validatingFields,t)},error:{enumerable:!0,get:()=>y(_.errors,t)}}),[_,t]),p=V.useCallback(x=>L.current.onChange({target:{value:ut(x),name:t},type:Se.CHANGE}),[t]),I=V.useCallback(()=>L.current.onBlur({target:{value:y(l._formValues,t),name:t},type:Se.BLUR}),[t,l._formValues]),F=V.useCallback(x=>{const A=y(l._fields,t);A&&A._f&&x&&(A._f.ref={focus:()=>z(x.focus)&&x.focus(),select:()=>z(x.select)&&x.select(),setCustomValidity:H=>z(x.setCustomValidity)&&x.setCustomValidity(H),reportValidity:()=>z(x.reportValidity)&&x.reportValidity()})},[l._fields,t]),W=V.useMemo(()=>({name:t,value:$,...X(i)||_.disabled?{disabled:_.disabled||i}:{},onChange:p,onBlur:I,ref:F}),[t,i,_.disabled,p,I,F,$]);return V.useEffect(()=>{const x=l._options.shouldUnregister||n,A=b.current;A&&A!==t&&!k&&l.unregister(A),l.register(t,{...D.current.rules,...X(D.current.disabled)?{disabled:D.current.disabled}:{}});const H=(ee,te)=>{const Y=y(l._fields,ee);Y&&Y._f&&(Y._f.mount=te)};if(H(t,!0),x){const ee=N(y(l._options.defaultValues,t,D.current.defaultValue));O(l._defaultValues,t,ee),T(y(l._formValues,t))&&O(l._formValues,t,ee)}return!k&&l.register(t),b.current=t,()=>{(k?x&&!l._state.action:x)?l.unregister(t):H(t,!1)}},[t,l,k,n]),V.useEffect(()=>{l._setDisabledField({disabled:i,name:t})},[i,t,l]),V.useMemo(()=>({field:W,formState:_,fieldState:h}),[W,_,h])}const It=V.createContext(null);It.displayName="HookFormContext";var Ut=(e,s,t,i,l)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:l||!0}}:{},be=e=>Array.isArray(e)?e:[e],Ye=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}};function ft(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const l=e[i],n=s[i];if(l&&P(l)&&n){const o=ft(l,n);P(o)&&(t[i]=o)}else e[i]&&(t[i]=n)}return t}var K=e=>P(e)&&!Object.keys(e).length,Pe=e=>e.type==="file",xe=e=>{if(!Le)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},yt=e=>e.type==="select-multiple",We=e=>e.type==="radio",Nt=e=>We(e)||Ve(e),Re=e=>xe(e)&&e.isConnected;function Bt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=T(e)?i++:e[s[i++]];return e}function Pt(e){for(const s in e)if(e.hasOwnProperty(s)&&!T(e[s]))return!1;return!0}function B(e,s){const t=Array.isArray(s)?s:De(s)?[s]:Ue(s),i=t.length===1?e:Bt(e,t),l=t.length-1,n=t[l];return i&&delete i[n],l!==0&&(P(i)&&K(i)||Array.isArray(i)&&Pt(i))&&B(e,t.slice(0,-1)),e}var Wt=e=>{for(const s in e)if(z(e[s]))return!0;return!1};function gt(e){return Array.isArray(e)||P(e)&&!Wt(e)}function Me(e,s={}){for(const t in e){const i=e[t];gt(i)?(s[t]=Array.isArray(i)?[]:{},Me(i,s[t])):T(i)||(s[t]=!0)}return s}function me(e,s,t){t||(t=Me(s));for(const i in e){const l=e[i];if(gt(l))T(s)||Te(t[i])?t[i]=Me(l,Array.isArray(l)?[]:{}):me(l,G(s)?{}:s[i],t[i]);else{const n=s[i];t[i]=!ie(l,n)}}return t}const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var vt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!T(e[0].attributes.value)?T(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe},mt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>T(e)?e:s?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var ht=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e){const s=e.ref;return Pe(s)?s.files:We(s)?ht(e.refs).value:yt(s)?[...s.selectedOptions].map(({value:t})=>t):Ve(s)?vt(e.refs).value:mt(T(s.value)?e.ref.value:s.value,e)}var qt=(e,s,t,i)=>{const l={};for(const n of e){const o=y(s,n);o&&O(l,n,o._f)}return{criteriaMode:t,names:[...e],fields:l,shouldUseNativeValidation:i}},Ae=e=>e instanceof RegExp,he=e=>T(e)?e:Ae(e)?e.source:P(e)?Ae(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===se.onSubmit,isOnBlur:e===se.onBlur,isOnChange:e===se.onChange,isOnAll:e===se.all,isOnTouch:e===se.onTouched});const rt="AsyncFunction";var Ht=e=>!!e&&!!e.validate&&!!(z(e.validate)&&e.validate.constructor.name===rt||P(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),jt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const _e=(e,s,t,i)=>{for(const l of t||Object.keys(e)){const n=y(e,l);if(n){const{_f:o,...c}=n;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],l)&&!i)return!0;if(o.ref&&s(o.ref,o.name)&&!i)return!0;if(_e(c,s))break}else if(P(c)&&_e(c,s))break}}};function it(e,s,t){const i=y(e,t);if(i||De(t))return{error:i,name:t};const l=t.split(".");for(;l.length;){const n=l.join("."),o=y(s,n),c=y(e,n);if(o&&!Array.isArray(o)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};l.pop()}return{name:t}}var $t=(e,s,t,i)=>{t(e);const{name:l,...n}=e;return K(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(o=>s[o]===(!i||se.all))},Jt=(e,s,t)=>!e||!s||e===s||be(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Kt=(e,s,t,i,l)=>l.isOnAll?!1:!t&&l.isOnTouch?!(s||e):(t?i.isOnBlur:l.isOnBlur)?!e:(t?i.isOnChange:l.isOnChange)?e:!0,zt=(e,s)=>!Ie(y(e,s)).length&&B(e,s),Gt=(e,s,t)=>{const i=be(y(e,t));return O(i,"root",s[t]),O(e,t,i),e};function at(e,s,t="validate"){if(Z(e)||Array.isArray(e)&&e.every(Z)||X(e)&&!e)return{type:t,message:Z(e)?e:"",ref:s}}var ve=e=>P(e)&&!Ae(e)?e:{value:e,message:""},nt=async(e,s,t,i,l,n)=>{const{ref:o,refs:c,required:k,maxLength:R,minLength:$,min:_,max:D,pattern:b,validate:L,name:h,valueAsNumber:p,mount:I}=e._f,F=y(t,h);if(!I||s.has(h))return{};const W=c?c[0]:o,x=m=>{l&&W.reportValidity&&(W.setCustomValidity(X(m)?"":m||""),W.reportValidity())},A={},H=We(o),ee=Ve(o),te=H||ee,Y=(p||Pe(o))&&T(o.value)&&T(F)||xe(o)&&o.value===""||F===""||Array.isArray(F)&&!F.length,Q=Ut.bind(null,h,i,A),M=(m,S,w,U=ue.maxLength,j=ue.minLength)=>{const q=m?S:w;A[h]={type:m?U:j,message:q,ref:o,...Q(m?U:j,q)}};if(n?!Array.isArray(F)||!F.length:k&&(!te&&(Y||G(F))||X(F)&&!F||ee&&!vt(c).isValid||H&&!ht(c).isValid)){const{value:m,message:S}=Z(k)?{value:!!k,message:k}:ve(k);if(m&&(A[h]={type:ue.required,message:S,ref:W,...Q(ue.required,S)},!i))return x(S),A}if(!Y&&(!G(_)||!G(D))){let m,S;const w=ve(D),U=ve(_);if(!G(F)&&!isNaN(F)){const j=o.valueAsNumber||F&&+F;G(w.value)||(m=j>w.value),G(U.value)||(S=j<U.value)}else{const j=o.valueAsDate||new Date(F),q=le=>new Date(new Date().toDateString()+" "+le),ae=o.type=="time",ne=o.type=="week";Z(w.value)&&F&&(m=ae?q(F)>q(w.value):ne?F>w.value:j>new Date(w.value)),Z(U.value)&&F&&(S=ae?q(F)<q(U.value):ne?F<U.value:j<new Date(U.value))}if((m||S)&&(M(!!m,w.message,U.message,ue.max,ue.min),!i))return x(A[h].message),A}if((R||$)&&!Y&&(Z(F)||n&&Array.isArray(F))){const m=ve(R),S=ve($),w=!G(m.value)&&F.length>+m.value,U=!G(S.value)&&F.length<+S.value;if((w||U)&&(M(w,m.message,S.message),!i))return x(A[h].message),A}if(b&&!Y&&Z(F)){const{value:m,message:S}=ve(b);if(Ae(m)&&!F.match(m)&&(A[h]={type:ue.pattern,message:S,ref:o,...Q(ue.pattern,S)},!i))return x(S),A}if(L){if(z(L)){const m=await L(F,t),S=at(m,W);if(S&&(A[h]={...S,...Q(ue.validate,S.message)},!i))return x(S.message),A}else if(P(L)){let m={};for(const S in L){if(!K(m)&&!i)break;const w=at(await L[S](F,t),W,S);w&&(m={...w,...Q(S,w.message)},x(w.message),i&&(A[h]=m))}if(!K(m)&&(A[h]={ref:W,...m},!i))return A}}return x(!0),A};const Yt={mode:se.onSubmit,reValidateMode:se.onChange,shouldFocusError:!0};function Qt(e={}){let s={...Yt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},l=P(s.defaultValues)||P(s.values)?N(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:N(l),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},k,R=0;const $={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={...$};let D={..._};const b={array:Ye(),state:Ye()},L=s.criteriaMode===se.all,h=r=>a=>{clearTimeout(R),R=setTimeout(r,a)},p=async r=>{if(!o.keepIsValid&&!s.disabled&&(_.isValid||D.isValid||r)){let a;s.resolver?(a=K((await te()).errors),I()):a=await Q(i,!0),a!==t.isValid&&b.state.next({isValid:a})}},I=(r,a)=>{!s.disabled&&(_.isValidating||_.validatingFields||D.isValidating||D.validatingFields)&&((r||Array.from(c.mount)).forEach(u=>{u&&(a?O(t.validatingFields,u,a):B(t.validatingFields,u))}),b.state.next({validatingFields:t.validatingFields,isValidating:!K(t.validatingFields)}))},F=(r,a=[],u,g,f=!0,d=!0)=>{if(g&&u&&!s.disabled){if(o.action=!0,d&&Array.isArray(y(i,r))){const v=u(y(i,r),g.argA,g.argB);f&&O(i,r,v)}if(d&&Array.isArray(y(t.errors,r))){const v=u(y(t.errors,r),g.argA,g.argB);f&&O(t.errors,r,v),zt(t.errors,r)}if((_.touchedFields||D.touchedFields)&&d&&Array.isArray(y(t.touchedFields,r))){const v=u(y(t.touchedFields,r),g.argA,g.argB);f&&O(t.touchedFields,r,v)}(_.dirtyFields||D.dirtyFields)&&(t.dirtyFields=me(l,n)),b.state.next({name:r,isDirty:m(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else O(n,r,a)},W=(r,a)=>{O(t.errors,r,a),b.state.next({errors:t.errors})},x=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},A=(r,a,u,g)=>{const f=y(i,r);if(f){const d=y(n,r,T(u)?y(l,r):u);T(d)||g&&g.defaultChecked||a?O(n,r,a?d:et(f._f)):U(r,d),o.mount&&!o.action&&p()}},H=(r,a,u,g,f)=>{let d=!1,v=!1;const E={name:r};if(!s.disabled){if(!u||g){(_.isDirty||D.isDirty)&&(v=t.isDirty,t.isDirty=E.isDirty=m(),d=v!==E.isDirty);const C=ie(y(l,r),a);v=!!y(t.dirtyFields,r),C?B(t.dirtyFields,r):O(t.dirtyFields,r,!0),E.dirtyFields=t.dirtyFields,d=d||(_.dirtyFields||D.dirtyFields)&&v!==!C}if(u){const C=y(t.touchedFields,r);C||(O(t.touchedFields,r,u),E.touchedFields=t.touchedFields,d=d||(_.touchedFields||D.touchedFields)&&C!==u)}d&&f&&b.state.next(E)}return d?E:{}},ee=(r,a,u,g)=>{const f=y(t.errors,r),d=(_.isValid||D.isValid)&&X(a)&&t.isValid!==a;if(s.delayError&&u?(k=h(()=>W(r,u)),k(s.delayError)):(clearTimeout(R),k=null,u?O(t.errors,r,u):B(t.errors,r)),(u?!ie(f,u):f)||!K(g)||d){const v={...g,...d&&X(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...v},b.state.next(v)}},te=async r=>(I(r,!0),await s.resolver(n,s.context,qt(r||c.mount,i,s.criteriaMode,s.shouldUseNativeValidation))),Y=async r=>{const{errors:a}=await te(r);if(I(r),r)for(const u of r){const g=y(a,u);g?O(t.errors,u,g):B(t.errors,u)}else t.errors=a;return a},Q=async(r,a,u={valid:!0})=>{for(const g in r){const f=r[g];if(f){const{_f:d,...v}=f;if(d){const E=c.array.has(d.name),C=f._f&&Ht(f._f);C&&_.validatingFields&&I([d.name],!0);const J=await nt(f,c.disabled,n,L,s.shouldUseNativeValidation&&!a,E);if(C&&_.validatingFields&&I([d.name]),J[d.name]&&(u.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(y(J,d.name)?E?Gt(t.errors,J,d.name):O(t.errors,d.name,J[d.name]):B(t.errors,d.name))}!K(v)&&await Q(v,a,u)}}return u.valid},M=()=>{for(const r of c.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(u=>!Re(u)):!Re(a._f.ref))&&we(r)}c.unMount=new Set},m=(r,a)=>!s.disabled&&(r&&a&&O(n,r,a),!ie(fe(),l)),S=(r,a,u)=>pe(r,c,{...o.mount?n:T(a)?l:Z(r)?{[r]:a}:a},u,a),w=r=>Ie(y(o.mount?n:l,r,s.shouldUnregister?y(l,r,[]):[])),U=(r,a,u={})=>{const g=y(i,r);let f=a;if(g){const d=g._f;d&&(!d.disabled&&O(n,r,mt(a,d)),f=xe(d.ref)&&G(a)?"":a,yt(d.ref)?[...d.ref.options].forEach(v=>v.selected=f.includes(v.value)):d.refs?Ve(d.ref)?d.refs.forEach(v=>{(!v.defaultChecked||!v.disabled)&&(Array.isArray(f)?v.checked=!!f.find(E=>E===v.value):v.checked=f===v.value||!!f)}):d.refs.forEach(v=>v.checked=v.value===f):Pe(d.ref)?d.ref.value="":(d.ref.value=f,d.ref.type||b.state.next({name:r,values:N(n)})))}(u.shouldDirty||u.shouldTouch)&&H(r,f,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&le(r)},j=(r,a,u)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const f=a[g],d=r+"."+g,v=y(i,d);(c.array.has(r)||P(f)||v&&!v._f)&&!ce(f)?j(d,f,u):U(d,f,u)}},q=(r,a,u={})=>{const g=y(i,r),f=c.array.has(r),d=N(a);O(n,r,d),f?(b.array.next({name:r,values:N(n)}),(_.isDirty||_.dirtyFields||D.isDirty||D.dirtyFields)&&u.shouldDirty&&b.state.next({name:r,dirtyFields:me(l,n),isDirty:m(r,d)})):g&&!g._f&&!G(d)?j(r,d,u):U(r,d,u),st(r,c)?b.state.next({...t,name:r,values:N(n)}):b.state.next({name:o.mount?r:void 0,values:N(n)})},ae=async r=>{o.mount=!0;const a=r.target;let u=a.name,g=!0;const f=y(i,u),d=C=>{g=Number.isNaN(C)||ce(C)&&isNaN(C.getTime())||ie(C,y(n,u,C))},v=tt(s.mode),E=tt(s.reValidateMode);if(f){let C,J;const de=a.type?et(f._f):ut(r),oe=r.type===Se.BLUR||r.type===Se.FOCUS_OUT,At=!jt(f._f)&&!s.resolver&&!y(t.errors,u)&&!f._f.deps||Kt(oe,y(t.touchedFields,u),t.isSubmitted,E,v),Ce=st(u,c,oe);O(n,u,de),oe?(!a||!a.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),k&&k(0)):f._f.onChange&&f._f.onChange(r);const Oe=H(u,de,oe),Dt=!K(Oe)||Ce;if(!oe&&b.state.next({name:u,type:r.type,values:N(n)}),At)return(_.isValid||D.isValid)&&(s.mode==="onBlur"?oe&&p():oe||p()),Dt&&b.state.next({name:u,...Ce?{}:Oe});if(!oe&&Ce&&b.state.next({...t}),s.resolver){const{errors:ze}=await te([u]);if(I([u]),d(de),g){const wt=it(t.errors,i,u),Ge=it(ze,i,wt.name||u);C=Ge.error,u=Ge.name,J=K(ze)}}else I([u],!0),C=(await nt(f,c.disabled,n,L,s.shouldUseNativeValidation))[u],I([u]),d(de),g&&(C?J=!1:(_.isValid||D.isValid)&&(J=await Q(i,!0)));g&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&le(f._f.deps),ee(u,J,C,Oe))}},ne=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},le=async(r,a={})=>{let u,g;const f=be(r);if(s.resolver){const d=await Y(T(r)?r:f);u=K(d),g=r?!f.some(v=>y(d,v)):u}else r?(g=(await Promise.all(f.map(async d=>{const v=y(i,d);return await Q(v&&v._f?{[d]:v}:v)}))).every(Boolean),!(!g&&!t.isValid)&&p()):g=u=await Q(i);return b.state.next({...!Z(r)||(_.isValid||D.isValid)&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!g&&_e(i,ne,r?f:c.mount),g},fe=(r,a)=>{let u={...o.mount?n:l};return a&&(u=ft(a.dirtyFields?t.dirtyFields:t.touchedFields,u)),T(r)?u:Z(r)?y(u,r):r.map(g=>y(u,g))},ye=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),error:y((a||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((a||t).touchedFields,r)}),ge=r=>{r&&be(r).forEach(a=>B(t.errors,a)),b.state.next({errors:r?t.errors:{}})},Fe=(r,a,u)=>{const g=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:d,message:v,type:E,...C}=f;O(t.errors,r,{...C,...a,ref:g}),b.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&g&&g.focus&&g.focus()},bt=(r,a)=>z(r)?b.state.subscribe({next:u=>"values"in u&&r(S(void 0,a),u)}):S(r,a,!0),qe=r=>b.state.subscribe({next:a=>{Jt(r.name,a.name,r.exact)&&$t(a,r.formState||_,xt,r.reRenderRoot)&&r.callback({values:{...n},...t,...a,defaultValues:l})}}).unsubscribe,_t=r=>(o.mount=!0,D={...D,...r.formState},qe({...r,formState:{...$,...r.formState}})),we=(r,a={})=>{for(const u of r?be(r):c.mount)c.mount.delete(u),c.array.delete(u),a.keepValue||(B(i,u),B(n,u)),!a.keepError&&B(t.errors,u),!a.keepDirty&&B(t.dirtyFields,u),!a.keepTouched&&B(t.touchedFields,u),!a.keepIsValidating&&B(t.validatingFields,u),!s.shouldUnregister&&!a.keepDefaultValue&&B(l,u);b.state.next({values:N(n)}),b.state.next({...t,...a.keepDirty?{isDirty:m()}:{}}),!a.keepIsValid&&p()},He=({disabled:r,name:a})=>{if(X(r)&&o.mount||r||c.disabled.has(a)){const f=c.disabled.has(a)!==!!r;r?c.disabled.add(a):c.disabled.delete(a),f&&o.mount&&!o.action&&p()}},ke=(r,a={})=>{let u=y(i,r);const g=X(a.disabled)||X(s.disabled);return O(i,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...a}}),c.mount.add(r),u?He({disabled:X(a.disabled)?a.disabled:s.disabled,name:r}):A(r,!0,a.value),{...g?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:he(a.min),max:he(a.max),minLength:he(a.minLength),maxLength:he(a.maxLength),pattern:he(a.pattern)}:{},name:r,onChange:ae,onBlur:ae,ref:f=>{if(f){ke(r,a),u=y(i,r);const d=T(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,v=Nt(d),E=u._f.refs||[];if(v?E.find(C=>C===d):d===u._f.ref)return;O(i,r,{_f:{...u._f,...v?{refs:[...E.filter(Re),d,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),A(r,!1,void 0,d)}else u=y(i,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(ot(c.array,r)&&o.action)&&c.unMount.add(r)}}},Ee=()=>s.shouldFocusError&&_e(i,ne,c.mount),Vt=r=>{X(r)&&(b.state.next({disabled:r}),_e(i,(a,u)=>{const g=y(i,u);g&&(a.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||r}))},0,!1))},je=(r,a)=>async u=>{let g;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=N(n);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:v}=await te();I(),t.errors=d,f=N(v)}else await Q(i);if(c.disabled.size)for(const d of c.disabled)B(f,d);if(B(t.errors,"root"),K(t.errors)){b.state.next({errors:{}});try{await r(f,u)}catch(d){g=d}}else a&&await a({...t.errors},u),Ee(),setTimeout(Ee);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:K(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},Ft=(r,a={})=>{y(i,r)&&(T(a.defaultValue)?q(r,N(y(l,r))):(q(r,a.defaultValue),O(l,r,N(a.defaultValue))),a.keepTouched||B(t.touchedFields,r),a.keepDirty||(B(t.dirtyFields,r),t.isDirty=a.defaultValue?m(r,N(y(l,r))):m()),a.keepError||(B(t.errors,r),_.isValid&&p()),b.state.next({...t}))},$e=(r,a={})=>{const u=r?N(r):l,g=N(u),f=K(r),d=f?l:g;if(a.keepDefaultValues||(l=u),!a.keepValues){if(a.keepDirtyValues){const v=new Set([...c.mount,...Object.keys(me(l,n))]);for(const E of Array.from(v)){const C=y(t.dirtyFields,E),J=y(n,E),de=y(d,E);C&&!T(J)?O(d,E,J):!C&&!T(de)&&q(E,de)}}else{if(Le&&T(r))for(const v of c.mount){const E=y(i,v);if(E&&E._f){const C=Array.isArray(E._f.refs)?E._f.refs[0]:E._f.ref;if(xe(C)){const J=C.closest("form");if(J){J.reset();break}}}}if(a.keepFieldsRef)for(const v of c.mount)q(v,y(d,v));else i={}}n=s.shouldUnregister?a.keepDefaultValues?N(l):{}:N(d),b.array.next({values:{...d}}),b.state.next({values:{...d}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!K(d),o.watch=!!s.shouldUnregister,o.keepIsValid=!!a.keepIsValid,o.action=!1,a.keepErrors||(t.errors={}),b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ie(r,l)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&n?me(l,n):t.dirtyFields:a.keepDefaultValues&&r?me(l,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},Je=(r,a)=>$e(z(r)?r(n):r,{...s.resetOptions,...a}),St=(r,a={})=>{const u=y(i,r),g=u&&u._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&setTimeout(()=>{f.focus(),a.shouldSelect&&z(f.select)&&f.select()})}},xt=r=>{t={...t,...r}},Ke={control:{register:ke,unregister:we,getFieldState:ye,handleSubmit:je,setError:Fe,_subscribe:qe,_runSchema:te,_updateIsValidating:I,_focusError:Ee,_getWatch:S,_getDirty:m,_setValid:p,_setFieldArray:F,_setDisabledField:He,_setErrors:x,_getFieldArray:w,_reset:$e,_resetDefaultValues:()=>z(s.defaultValues)&&s.defaultValues().then(r=>{Je(r,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:Vt,_subjects:b,_proxyFormState:_,get _fields(){return i},get _formValues(){return n},get _state(){return o},set _state(r){o=r},get _defaultValues(){return l},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:_t,trigger:le,register:ke,handleSubmit:je,watch:bt,setValue:q,getValues:fe,reset:Je,resetField:Ft,clearErrors:ge,unregister:we,setError:Fe,setFocus:St,getFieldState:ye};return{...Ke,formControl:Ke}}function Xt(e={}){const s=V.useRef(void 0),t=V.useRef(void 0),[i,l]=V.useState({isDirty:!1,isValidating:!1,isLoading:z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:z(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=Qt(e);s.current={...c,formState:i}}const n=s.current.control;return n._options=e,Be(()=>{const o=n._subscribe({formState:n._proxyFormState,callback:()=>l({...n._formState}),reRenderRoot:!0});return l(c=>({...c,isReady:!0})),n._formState.isReady=!0,o},[n]),V.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),V.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),V.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),V.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),V.useEffect(()=>{if(n._proxyFormState.isDirty){const o=n._getDirty();o!==i.isDirty&&n._subjects.state.next({isDirty:o})}},[n,i.isDirty]),V.useEffect(()=>{var o;e.values&&!ie(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((o=n._options.resetOptions)===null||o===void 0)&&o.keepIsValid||n._setValid(),t.current=e.values,l(c=>({...c}))):n._resetDefaultValues()},[n,e.values]),V.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=V.useMemo(()=>ct(i,n),[n,i]),s.current}var rr=({submitHandlers:e,submitConfig:s,submitData:t,fetcher:i,stringifyAllValues:l=!0,...n})=>{var o,c;const[k,R]=re.useState(!1),$=kt("/"),_=Et(),D=Ct(),b=(o=i?.submit)!=null?o:_,L=(c=i?.data)!=null?c:D,h=Xt({...n,errors:L?.errors}),p=Ot(),I=re.useMemo(()=>{var M,m;const S=p.state!=="idle"&&((M=p.formData)!=null?M:p.json)!==void 0,w=i?.state!=="idle"&&((m=i?.formData)!=null?m:i?.json)!==void 0;return S||w},[p.state,p.formData,p.json,i?.state,i?.formData,i?.json]),[F,W]=re.useState(!1);re.useEffect(()=>{I||W(!1)},[I]);const x=re.useMemo(()=>(M,m,S,w,U)=>{var j,q,ae,ne;W(!0),R(!0);const le=(j=s?.encType)!=null?j:S,fe=(ae=(q=s?.method)!=null?q:w)!=null?ae:"post",ye=(ne=s?.action)!=null?ne:U,ge={...M,...t},Fe=le==="application/json"?ge:Rt(ge,l);b(Fe,{...s,method:fe,encType:le,action:ye})},[b,s,t,l]),A=re.useMemo(()=>()=>{},[]),H=re.useMemo(()=>({get isDirty(){return h.formState.isDirty},get isLoading(){return h.formState.isLoading},get isSubmitted(){return h.formState.isSubmitted},get isSubmitSuccessful(){return k||h.formState.isSubmitSuccessful},get isSubmitting(){return F||h.formState.isSubmitting},get isValidating(){return h.formState.isValidating},get isValid(){return h.formState.isValid},get disabled(){return h.formState.disabled},get submitCount(){return h.formState.submitCount},get defaultValues(){return h.formState.defaultValues},get dirtyFields(){return h.formState.dirtyFields},get touchedFields(){return h.formState.touchedFields},get validatingFields(){return h.formState.validatingFields},get errors(){return h.formState.errors}}),[h.formState,k,F]),ee=re.useMemo(()=>(M,m)=>{R(!1),h.reset(M,m)},[h.reset]),te=re.useMemo(()=>(M,m)=>{var S;const w=(S=y(L?.defaultValues,M))!=null?S:y(h.formState.defaultValues,M);return{...h.register(M,m),...!m?.disableProgressiveEnhancement&&{defaultValue:typeof w=="string"?w:void 0,defaultChecked:typeof w=="boolean"?w:void 0}}},[h.register,L?.defaultValues,h.formState.defaultValues]),Y=re.useMemo(()=>M=>{var m,S,w,U,j;const q=(m=M?.currentTarget)==null?void 0:m.enctype,ae=(S=M?.currentTarget)==null?void 0:S.method,ne=(w=M?.currentTarget)==null?void 0:w.action.replace(`${window.location.origin}${$==="/"?"":$}`,""),le=(U=e?.onValid)!=null?U:x,fe=(j=e?.onInvalid)!=null?j:A;return h.handleSubmit((ye,ge)=>le(ye,ge,q,ae,ne),fe)(M)},[h.handleSubmit,e,x,A,$]);return re.useMemo(()=>({...h,handleSubmit:Y,reset:ee,register:te,formState:H}),[h,Y,ee,te,H])};export{tr as a,Ut as b,y as g,O as s,rr as u};
